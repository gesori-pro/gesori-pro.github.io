# Firebase 가위바위보 구현 계획

## 목표
**Firebase Realtime Database**를 사용하여 **진정한 온라인 멀티플레이** 가위바위보 게임을 만듭니다.
이것은 서로 다른 컴퓨터나 네트워크에 있는 사용자들이 같은 "게임 방"에 접속하여 대결할 수 있게 해줍니다.

## 기술 스택
-   **프론트엔드**: HTML5, CSS3, Vanilla JavaScript (순수 자바스크립트).
-   **백엔드**: Firebase Realtime Database (무료 "Spark" 요금제).
-   **호스팅**: 사용자가 선호하는 웹 호스팅 (또는 GitHub Pages).

## 데이터베이스 구조 (JSON)
데이터는 "방(Rooms)" 단위로 관리됩니다. 방 코드(예: `ROOM_1234`)가 키(Key)가 됩니다.

```json
{
  "rooms": {
    "ROOM_CODE": {
      "p1": "p1_session_id", // 플레이어 1 세션 ID
      "p2": "p2_session_id", // 플레이어 2 세션 ID
      "p1Choice": "rock", // 선택이 확정된 후에만 저장됨
      "p2Choice": "paper",
      "status": "waiting", // waiting(대기), playing(게임중), result(결과)
      "winner": "" // p1, p2, draw(무승부)
    }
  }
}
```

*참고: 로그인 없는 간단한 프로토타입이므로, 임의의 ID를 생성하여 사용합니다.*

## 보안 및 부정행위 방지
-   **클라이언트 측 검증**: (무료/간편한 구성을 위해) 클라우드 함수(Cloud Functions)를 쓰지 않고 클라이언트가 직접 DB에 씁니다.
-   **프라이버시**: 실제 상용 앱이라면 서버(Cloud Functions)에서 상대방의 패를 숨겨야 하지만, 이번 **프로토타입**에서는 UI 상에서만 가리는 "신사협정" 방식을 사용합니다.
    -   *더 나은 방법*: P1이 먼저 `p1State: "ready"` 상태만 보내고(선택은 로컬에 숨김), 둘 다 준비되면 패를 공개하는 방식이 있습니다. (하지만 자바스크립트를 해킹하면 볼 수 있음. 프로토타입용으로는 충분함)

## 구현 단계

### 1. `index.html`
-   CDN을 통해 **Firebase SDK** 추가.
-   UI 구성:
    -   **로비**: "방 만들기" / "방 참가 (코드 입력)".
    -   **게임 영역**: 가위/바위/보 버튼.
    -   **상태 표시**: "상대방 기다리는 중...", "승리/패배".

### 2. `fire.js` (설정 파일)
-   `firebaseConfig` 객체를 담을 별도 파일.
-   **사용자 작업 필요**: 사용자가 직접 Firebase 콘솔 -> 프로젝트 생성 -> 설정 복사 -> 여기에 붙여넣기 해야 함.

### 3. `game.js` (로직)
-   **주요 함수**:
    -   `createRoom()`: 임의의 방 ID 생성, DB에 자신을 P1으로 설정.
    -   `joinRoom(id)`: 방이 존재하고 비어있는지 확인 후, 자신을 P2로 설정.
    -   `makeChoice(choice)`: 선택지를 DB에 업데이트.
    -   `listenForUpdates()`: `onValue()`를 사용하여 DB 변경사항을 실시간 감지.

## 검증
1.  사용자를 위한 "Firebase 설정 가이드"를 제공합니다.
2.  키를 입력한 후, 두 개의 다른 브라우저(또는 폰 + PC)에서 HTML 파일을 열어 테스트합니다.
